spring.application.name=welcome

# Actuator endpoints
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=always
management.health.db.enabled=true

# Database configuration - MySQL for production, H2 for testing
spring.datasource.url=${MYSQL_URL}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.username=${MYSQL_USER}
spring.datasource.password=${MYSQL_PASSWORD}

# redis
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}

# H2 configuration for testing profile
# spring.datasource.url=jdbc:h2:mem:testdb
# spring.datasource.driverClassName=org.h2.Driver
# spring.datasource.username=sa
# spring.datasource.password=

# Kafka Configuration
spring.kafka.bootstrap-servers=localhost:9092
spring.kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.value-serializer=org.apache.kafka.common.serialization.StringSerializer
spring.kafka.producer.properties.enable.idempotence=true
spring.kafka.producer.properties.acks=all
spring.kafka.producer.properties.retries=3

# Circuit Breaker Configuration
resilience4j.circuitbreaker.instances.content-ingestion.slidingWindowSize=100
resilience4j.circuitbreaker.instances.content-ingestion.minimumNumberOfCalls=10
resilience4j.circuitbreaker.instances.content-ingestion.failureRateThreshold=50
resilience4j.circuitbreaker.instances.content-ingestion.waitDurationInOpenState=60000

# Retry Configuration
resilience4j.retry.instances.content-ingestion.maxAttempts=3
resilience4j.retry.instances.content-ingestion.waitDuration=1000

# JPA/Hibernate properties
spring.jpa.database-platform=org.hibernate.dialect.MySQL8Dialect
spring.h2.console.enabled=false
